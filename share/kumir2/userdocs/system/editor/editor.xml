<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
        "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" []>
<chapter>
    <title>Редактор программ</title>
    <section>
        <title>Общие сведения</title>
        <para>
            Встроенный редактор предназначен для редактирования текстов программ. Функциональность редактора
            является стандартной для текстовых редакторов.
        </para>
        <para>
            Клавиатурные сочетания, используемые для редактирования текста и навигации по тексту, соответствуют
            общепринятым.
        </para>
        <para>
            В отличии от большинства текстовых редакторов, редактор программ "Кумир" позволяет
			перемещать курсор в произвольную, в том числе не существующую, строку текста, а редактор
            текстовых файлов (доступен только в конфигурациях
            <emphasis role="bold">Профессиональная</emphasis>
            и
            <emphasis role="bold">Для учителей</emphasis>) -- в произвольную ячейку текста.
        </para>
        <para>
            При вводе текста в не существующую строку, существующий текст будет заполнен пустыми строками до
            текущего положения курсора. При вводе текста в не существующую позицию строки -- строка будет заполнена
            пробелами до текущего положения курсора.
        </para>
        <para>
            Текущее положение курсора отображается в строке состояния. Рядом отображается индикатор раскладки
            клавиатуры.
        </para>
    </section>
    <section>
        <title>Ввод символов с нажатой клавишей Alt</title>
        <para>
            Во время редактирования текста, нажатие любой клавиши совместно с клавишей
            <keycombo>
                <keysym>Alt</keysym>
            </keycombo>
			приводит ко вводу символа в другой раскладке.
        </para>
        <para>
            При редактировании текста программы на языке Кумир, часто используемые комбинации символов могут быть
            введены:
            <orderedlist>
                <listitem>
                    <para>
                        <code>:=</code>
                        (оператор присваивания) -- с помощью комбинации клавиш
                        <keycombo>
                            <keysym>Alt+=</keysym>
                        </keycombo>
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <code>|</code>
                        (начало комментария) -- с помощью комбинации клавиш
                        <keycombo>
                            <keysym>Alt+1</keysym>
                        </keycombo>
                        .
                    </para>
                </listitem>
            </orderedlist>
        </para>
    </section>
    <section>
        <title>Завершение составных конструкций программ</title>
        <para>Нажатие клавиши
            <keycombo>
                <keysym>Enter</keysym>
            </keycombo>
            (или
            <keycombo>
                <keysym>ввод</keysym>
            </keycombo>
            ) в строке, где начато описание
            составной конструкции языка: начало цикла, условие и&nbsp;т.&nbsp;д., может приводить к автоматическому
            добавлению
            соответствующего парного закрывающего символа или ключевого слова. Это автоматическое дописывание текста
            программы
            возможно только в том случае, если дописываемый текст не приводит к возникновению новых синтаксических
            ошибок.
        </para>
        <para>После автоматического дописывания закрывающей конструкции, текстовый курсор находится в начале строки,
            которая следует за строкой, открывающей составную конструкцию.
        </para>
        <para>
            <emphasis role="bold">Замечание.</emphasis>
            Данная возможность является экспериментальной и по умолчанию отключена. Для ее включения необходимо отметить
            флаг<guimenuitem>Автоматически дописывать конструкции программы</guimenuitem>, который находится в
            разделе
            <guimenu>Редактор</guimenu>
            настроек системы &quot;Кумир&quot;.
        </para>
    </section>
    <section>
        <title>Подсказки при редактировании программ</title>
        <para>
            Редактор программ тесно связан с синтаксическим анализатором языка программирования. Это позволяет ему
            предсказать возможные варианты корректных фрагментов текстов в зависимости от положения текстового курсора.
        </para>
        <para>
            Для того чтобы отобразить список возможных вариантов, нужно нажать клавишу
            <keycombo>
                <keysym>Tab</keysym>
            </keycombo>
            или сочетание клавиш
            <keycombo>
                <keysym>Ctrl+ПРОБЕЛ</keysym>
            </keycombo>.
        </para>
        <para>
            Ниже описаны варианты подсказок для языка программирования &quot;Кумир&quot;.
        </para>
        <section>
            <title>Подсказки в начале строки</title>
            <para>
                В начале строки список подсказок состоит из:
                <orderedlist>
                    <listitem>
                        <para>
                            Алгоритмов, которые не возвращают никаких значений
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            Имен величин, объявленных в текущем алгоритме выше положения текстового курсора
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            Имен аргументов алгоритма, которым не запрещено присваивание.
                        </para>
                    </listitem>
                </orderedlist>
            </para>
        </section>
        <section>
            <title>Подсказки при объявлении цикла или условия</title>
            <para>
                При объявлении цикла, список подсказок состоит из допустимых имен целочисленных переменных и функций, если
                объявляется цикл <code language="kumir">для</code> или цикл <code language="kumir">раз</code>.
            </para>
            <para>
                При объявлении условия или цикла <code language="kumir">пока</code>, список подсказок
                состоит из логических переменных и функций.
            </para>
        </section>
        <section>
            <title>Подсказки при редактировании вычислимых выражений</title>
            <para>
                При редактировании вычислимых выражений определяется тип целевой величины, затем -- определяется
                тип допустимого операнда в текущем положении текстового курсора. Список подсказок составляется
                из величин и функций подходящего типа.
            </para>
        </section>
    </section>
    <section>
        <title>Поиск и замена</title>
		<para>
			Активация пунктов меню <guimenuitem>Редактирование&rarr;Найти</guimenuitem> или 
			<guimenuitem>Редактирование&rarr;Заменить</guimenuitem> открывает <guimenuitem>область поиска и замены</guimenuitem>.
			Существует 2 варианта этой области:
			<itemizedlist>
				<listitem><para><emphasis role="bold">обычный</emphasis> -- содержит только поиск,</para></listitem>
				<listitem><para><emphasis role="bold">расширенный</emphasis> -- содержит поиск по шаблону и замену.</para></listitem>
			</itemizedlist>
		</para>
		<section>
			<title>Обычный вариант</title>
			<para>
				Активация пункта меню <guimenuitem>Редактирование&rarr;Найти</guimenuitem> открывает обычный вариант области.
				Здесь можно ввести искомый текст, все вхождения которого в тексте файла станут выделенными.
				<mediaobject>
					<imageobject>
						<imagedata format="PNG" fileref="images/edit-find.png"/>
					</imageobject>
					<imageobject>
						<imagedata format="PDF" fileref="images/edit-find.pdf"/>
					</imageobject>
					<caption>Область поиска</caption>
				</mediaobject>
			</para>
			<para>
				Если найдено несколько вхождений искомой строки, между ними можно перемещаться, нажимая кнопки перехода к
				предыдущему или следующему вхождению текста.
			</para>
		</section>
		<section>
			<title>Расширенный вариант</title>
			<para>
				Активация пункта меню <guimenuitem>Редактирование&rarr;Замена</guimenuitem> или нажатие кнопки
				<guibutton>Отображение дополнительных параметров</guibutton> отображает расширенный вариант области поиска.
				<mediaobject>
					<imageobject>
						<imagedata format="PNG" fileref="images/edit-replace.png"/>
					</imageobject>
					<imageobject>
						<imagedata format="PDF" fileref="images/edit-replace.pdf"/>
					</imageobject>
					<caption>Область поиска -- расширенный вариант</caption>
				</mediaobject>
			</para>
			<para>
				В поле <guimenuitem>Режим поиска</guimenuitem> можно указать возможность поиска не только простого текста, но и шаблона.
				Для написания шаблонов можно использовать 2 специальных символа:
				<itemizedlist>
					<listitem>
						<para><code>?</code> соответствует одному любому символу, </para>
					</listitem>
					<listitem>
						<para><code>*</code> соответствует произвольному количеству любых символов. </para>
					</listitem>
				</itemizedlist>
			</para>
		</section>
    </section>
	<section>
		<title>
			Копирование текста в RichText-редакторы
		</title>
		<para>
			При копировании текста в RichText-редактор (например, таковыми являются Microsoft Word, LibreOffice Writer и др.) 
			в целевой файл переносится не только код программы, но и отладочная информация. При этом в документе создаётся таблица, 
			содержащая 1 строку и 2 столбца. В левый столбец переносится код программы, а в правый -- содержимое поля отладки 
			(сообщения об ошибках, а также текущие значения переменных, которые выводятся на этапе выполнения программы).
		</para>
		<para>
			Формат текста при копировании не теряется. Единственное изменение формата проявляется, если текст копируемой программы 
			содержит синтаксическую ошибку. В этом случае, при открытии целевого документа в Microsoft Word или LibreOffice Writer, 
			фрагмент кода с ошибкой будет иметь красный цвет (в то время, как в других редакторах, а также в самом редакторе КуМира 
			синтаксические ошибки выделяются лишь подчёркиванием).
		</para>
		<para configuration="teacher">
			Подсветка защищённых и скрытых частей программы в целевом документе не отображается.
		</para>
        <para>
            В том случае, если необходимо скопировать только текст программы <emphasis>без форматирования и текста на полях</emphasis>,
            то вставка текста в RickText-редактор выполняется командой <guimenuitem>Специальная вставка</guimenuitem> целевого
            редактора, где в предложенном диалоге специальной вставки нужно выбрать "Простой текст".
        </para>
	</section>
</chapter>